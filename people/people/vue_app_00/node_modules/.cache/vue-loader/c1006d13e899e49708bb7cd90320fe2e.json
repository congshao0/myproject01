{"remainingRequest":"C:\\Users\\web\\Desktop\\LC\\第四阶段\\day05\\vue_app_00\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\web\\Desktop\\LC\\第四阶段\\day05\\vue_app_00\\src\\components\\xz\\Cart.vue?vue&type=style&index=0&lang=css","dependencies":[{"path":"C:\\Users\\web\\Desktop\\LC\\第四阶段\\day05\\vue_app_00\\src\\components\\xz\\Cart.vue","mtime":1567410093810},{"path":"C:\\Users\\web\\Desktop\\LC\\第四阶段\\day05\\vue_app_00\\node_modules\\css-loader\\index.js","mtime":499162500000},{"path":"C:\\Users\\web\\Desktop\\LC\\第四阶段\\day05\\vue_app_00\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1521907988000},{"path":"C:\\Users\\web\\Desktop\\LC\\第四阶段\\day05\\vue_app_00\\node_modules\\postcss-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\web\\Desktop\\LC\\第四阶段\\day05\\vue_app_00\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1534853416000},{"path":"C:\\Users\\web\\Desktop\\LC\\第四阶段\\day05\\vue_app_00\\node_modules\\vue-loader\\lib\\index.js","mtime":1527860006000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n/*1:商品项目元素*/\r\n.cart-item{\r\n  display: flex;/*弹性布局*/\r\n  justify-content: space-between;/*两端对齐*/\r\n  align-items: center;\r\n  border-bottom: 1px solid #ccc;/*底部边线*/\r\n  margin-top:25px; /*顶部外边距*/\r\n}\r\n/*2:修改左侧文字 复选 商品名称 价格*/\r\n.leftText{\r\n  display: flex;/*子元素水平对齐*/\r\n  align-items: center;/*垂直居中*/\r\n}\r\n/*3:商品名称 9:53*/\r\n.lname{\r\n  margin-left:25px;\r\n}\r\n.price{\r\n  margin-left:25px;\r\n}\r\n",{"version":3,"sources":["Cart.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Cart.vue","sourceRoot":"src\\components\\xz","sourcesContent":["<template>\r\n  <div class=\"cart\">\r\n  <!--1:顶部复选框：全选-->\r\n    <div class=\"selectall\">\r\n      全选 <input type=\"checkbox\" @change=\"selectAll\"/>\r\n    </div>\r\n    <!--2:商品信息-->\r\n    <div class=\"cart-item\" v-for=\"(item,index) of list\" :key=\"index\">\r\n      <div class=\"leftText\">\r\n        <input type=\"checkbox\" v-model=\"item.cb\"/>\r\n        <div class=\"lname\">{{item.lname}}</div>\r\n        <div class=\"price\">{{item.price}}</div>\r\n      </div>\r\n      <mt-button @click=\"deleteItem\" :data-id=\"item.id\">删除</mt-button>\r\n    </div>\r\n    <!--3:购物中商品数量:删除选中商品,清空购物车-->\r\n    <div>\r\n      购物车中商品数量\r\n      <span style=\"color:red\">0</span>\r\n      <mt-button @click=\"deleteItems\">删除选中商品</mt-button>\r\n      <mt-button>清空购物车</mt-button>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nexport default {\r\n  data(){\r\n    return {\r\n      list:[] //当前登录用户购物车列表\r\n    }\r\n  },\r\n  created() {\r\n  //当前组件创建成功回调函数\r\n    this.loadMore();\r\n  },\r\n  methods:{\r\n    selectAll(){\r\n\r\n    },\r\n    deleteItems(){\r\n      //功能：删除用户中的多个商品\r\n      //1.显示确认对话框\r\n      this.$messagebox.confirm(\"是否删除指定数据\").then(res=>{\r\n        //2.创建变量保存选中id值\r\n        var id=\"\";\r\n        //3.创建循环遍历数组中每个元素\r\n        for(var item of this.list){\r\n          //4.判断当前元素属性cd是否等于true\r\n          if(item.cb){\r\n            //5.拼接id\r\n            id+=item.id+\",\"; \r\n          }\r\n        }\r\n        //6.去除字符串中最后一个逗号\r\n        id=id.slice(0,-1);\r\n        //7.判断用户是都选中商品，选择需要删除的商品\r\n        if(id=\"\"){\r\n          this.$toast(\"请选择需要删除的商品\");\r\n          return;\r\n        };\r\n        //8.创建url 创建obj 发送ajax请求\r\n        var url =\"delItems\";\r\n        var obj={id:id};\r\n        //9.获取服务器返回数据\r\n        this.axios.get(url,{params:obj}).then(res=>{\r\n          //10.判断删除多个商品是否成功\r\n          if(res.data.code==-1){\r\n            this.$toast(\"删除失败\")\r\n          }else{\r\n            this.$toast(\"删除成功\");\r\n            //11.刷新操作 loadMore()\r\n            this.loadMore();\r\n          }\r\n        })\r\n      }).catch(err=>{\r\n\r\n      })   \r\n    },\r\n    deleteItem(event){\r\n      //功能:用户点击删除按钮完成删除指定商品任务\r\n      //(1)为按钮绑定点击事件调用deleteItem \r\n      //(2)显示确认框如果用户选 确定\r\n      this.$messagebox.confirm(\"是否删除指定数据\").then(res=>{\r\n      //(3)将当前商品id传递函数\r\n        var id = event.target.dataset.id;\r\n        //(4)发送ajax请示完成删除任务\r\n        var url=\"delItem\";\r\n        var obj={id:id};\r\n        this.axios.get(url,{\r\n          params:obj\r\n        }).then(res=>{\r\n          if(res.data.code==1){\r\n            this.$toast(\"删除成功\");\r\n            this.loadMore();//刷新\r\n          }else{\r\n            this.$toast(\"删除失败\")\r\n          }\r\n        }) \r\n        //\r\n        //(5)删除成功 提示\"删除成功\"\r\n        }).catch(err=>{\r\n\r\n      })\r\n    },\r\n    loadMore(){\r\n      //功能:获取当前用户购物车列表\r\n      //1:创建url请求服务器地址\r\n      var url = \"carts\";\r\n      //2:发送ajax 请求(让服务器程序完成功能)\r\n      this.axios.get(url).then(res=>{\r\n        if(res.data.code == -1){\r\n      //4:如果服务器返回-1 请登录\r\n        this.$messagebox(\"消息\",\"请登录\").then(res=>{\r\n      //回调函数（用户点击确认按钮后调用函数）\r\n        this.$router.push(\"/Login\")\r\n      })\r\n      }else{\r\n        //3:获取服务器返回数据\r\n        //this.list = res.data.data;\r\n        //添加新功能：为数据添加属性cb\r\n        //3.1创建循环遍历res.data.data中数据\r\n        var rows=res.data.data;\r\n        for(var item of rows){\r\n          //3.2为其添加属性cb值false\r\n          item.cb=false;\r\n        }\r\n        //3.3将新数组数据赋值list(顺序)\r\n        this.list=rows;\r\n      }\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style>\r\n/*1:商品项目元素*/\r\n.cart-item{\r\n  display: flex;/*弹性布局*/\r\n  justify-content: space-between;/*两端对齐*/\r\n  align-items: center;\r\n  border-bottom: 1px solid #ccc;/*底部边线*/\r\n  margin-top:25px; /*顶部外边距*/\r\n}\r\n/*2:修改左侧文字 复选 商品名称 价格*/\r\n.leftText{\r\n  display: flex;/*子元素水平对齐*/\r\n  align-items: center;/*垂直居中*/\r\n}\r\n/*3:商品名称 9:53*/\r\n.lname{\r\n  margin-left:25px;\r\n}\r\n.price{\r\n  margin-left:25px;\r\n}\r\n</style>\r\n\r\n"]}]}